(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47962ee8"],{1799:function(e,t,c){"use strict";var o=c("7a23");function a(e,t,c,a,r,d){return Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(c.totalPage,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:["page-item",t==c.currentPage?"active":""],key:a},[Object(o["createVNode"])("a",{class:"page-link",href:"#",onClick:Object(o["withModifiers"])(c=>(d.goTop(),e.$emit("changePage",t)),["prevent"])},Object(o["toDisplayString"])(t),9,["onClick"])],2))),128)}var r=c("1157"),d=c.n(r),l={props:["currentPage","totalPage"],data(){return{}},methods:{goTop(){console.log("in0"),d()("html, body").animate({scrollTop:d()(".container").offset().top-0},"fast")}}};l.render=a;t["a"]=l},"1fae":function(e,t,c){"use strict";c.r(t);var o=c("7a23");const a={class:"container"},r=Object(o["createVNode"])("div",{class:"btn-area text-end mt-4"},[Object(o["createVNode"])("button",{class:"btn btn-secondary font-weight-bold float-end mb-5 text-white","data-bs-toggle":"modal","data-bs-target":"#productModal"}," ADD NEW PRODUCT ")],-1),d={class:"table-box"},l={class:"table mt-4"},n=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{class:"text-left",width:"150"},"CATEGORY"),Object(o["createVNode"])("th",null,"PRODUCTNAME"),Object(o["createVNode"])("th",{class:"text-right",width:"150"},"ORIGINPRICE"),Object(o["createVNode"])("th",{class:"text-right",width:"150"},"PRICE"),Object(o["createVNode"])("th",{class:"text-center",width:"120"},"ENABLE")])],-1),i={id:"productList",class:"js-productList"},s={class:"text-left",width:"150"},b={class:"text-end",width:"150"},u={class:"text-end",width:"150"},p={class:"text-center",width:"120"},m={key:0,class:"text-center"},O={key:1,class:"text-center"},j={width:"120",class:"text-center"},g={class:"btn-group"},h={class:"pagination justify-content-center"};function V(e,t,c,V,N,f){const v=Object(o["resolveComponent"])("InnerBanner"),k=Object(o["resolveComponent"])("Pagination"),P=Object(o["resolveComponent"])("DelModal"),y=Object(o["resolveComponent"])("ProdcutInfo");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(v,{msg:N.msg},null,8,["msg"]),Object(o["createVNode"])("div",a,[r,Object(o["createVNode"])("div",d,[Object(o["createVNode"])("table",l,[n,Object(o["createVNode"])("tbody",i,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.productLists,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:t},[Object(o["createVNode"])("td",s,Object(o["toDisplayString"])(e.category),1),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",null,Object(o["toDisplayString"])(e.title),1),""!=e.imageUrl?(Object(o["openBlock"])(),Object(o["createBlock"])("img",{key:0,width:"150",src:e.imageUrl,alt:""},null,8,["src"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("td",b,Object(o["toDisplayString"])(e.origin_price),1),Object(o["createVNode"])("td",u,Object(o["toDisplayString"])(e.price),1),Object(o["createVNode"])("td",p,[e.is_enabled?(Object(o["openBlock"])(),Object(o["createBlock"])("span",m,"啟用")):(Object(o["openBlock"])(),Object(o["createBlock"])("span",O,"未啟用"))]),Object(o["createVNode"])("td",j,[Object(o["createVNode"])("div",g,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-sm js-edit",onClick:t=>f.getProduct(e),"data-bs-toggle":"modal","data-bs-target":"#productModal"}," 編輯 ",8,["onClick"]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-sm js-del","data-bs-toggle":"modal","data-bs-target":"#delModal",onClick:t=>f.getProduct(e)}," 刪除 ",8,["onClick"])])])]))),128))])]),Object(o["createVNode"])("ul",h,[e.productLists.length>1?(Object(o["openBlock"])(),Object(o["createBlock"])(k,{key:0,"current-page":e.pagination.current_page,"total-page":e.pagination.total_pages,onChangePage:f.changePage},null,8,["current-page","total-page","onChangePage"])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])(P,{item:N.tempProduct,onDelItem:f.delProduct,onCancel:e.cancel},null,8,["item","onDelItem","onCancel"]),Object(o["createVNode"])(y,{onChangeProducts:f.changeProducts,product:N.tempProduct},null,8,["onChangeProducts","product"])])],64)}var N=c("1799"),f=c("5502"),v=c("e417");c("ddb0"),c("e01a");const k={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true","data-bs-target":"#productModal"},P={class:"modal-dialog modal-xl modal-dialog-centered"},y={class:"modal-content border-0"},x={class:"modal-header"},w={id:"productModalLabel",class:"modal-title text-black font-weight-bold"},C={key:0},B={key:1},D={class:"modal-body"},M={class:"row"},U={class:"col-sm-12 col-lg-4"},I={class:"mb-1"},L={class:"form-group"},T=Object(o["createVNode"])("label",{for:"imageUrl"},"輸入圖片網址",-1),$={class:"col-sm-12 col-lg-8"},_={class:"form-group"},S=Object(o["createVNode"])("label",{for:"title"},"標題",-1),R={class:"row"},E={class:"form-group col-md-6"},A=Object(o["createVNode"])("label",{for:"category"},"分類",-1),J={class:"form-group col-md-6"},F=Object(o["createVNode"])("label",{for:"unit"},"單位",-1),G={class:"row"},W={class:"form-group col-md-6"},Y=Object(o["createVNode"])("label",{for:"origin_price"},"原價",-1),q={class:"form-group col-md-6"},z=Object(o["createVNode"])("label",{for:"price"},"售價",-1),H=Object(o["createVNode"])("hr",null,null,-1),K={class:"form-group"},Q=Object(o["createVNode"])("label",{for:"description"},"產品描述",-1),X={class:"form-group"},Z=Object(o["createVNode"])("label",{for:"content"},"說明內容",-1),ee={class:"form-group"},te={class:"form-check"},ce=Object(o["createVNode"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),oe={class:"modal-footer"},ae=Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function re(e,t,c,a,r,d){return Object(o["openBlock"])(),Object(o["createBlock"])("div",k,[Object(o["createVNode"])("div",P,[Object(o["createVNode"])("div",y,[Object(o["createVNode"])("div",x,[Object(o["createVNode"])("h5",w,[""==c.product.id?(Object(o["openBlock"])(),Object(o["createBlock"])("span",C,"新增產品 "+Object(o["toDisplayString"])(c.product.id),1)):(Object(o["openBlock"])(),Object(o["createBlock"])("span",B,"新增產品"))])]),Object(o["createVNode"])("div",D,[Object(o["createVNode"])("div",M,[Object(o["createVNode"])("div",U,[Object(o["createVNode"])("div",I,[Object(o["createVNode"])("div",L,[T,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"imageUrl",type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":t[1]||(t[1]=e=>r.tempProduct.imageUrl=e)},null,512),[[o["vModelText"],r.tempProduct.imageUrl]])]),Object(o["createVNode"])("img",{class:"img-fluid",src:r.image,alt:""},null,8,["src"])]),Object(o["createVNode"])("div",null,[Object(o["createVNode"])("input",{type:"file",ref:"uploadImage",class:"form-control js-uploadImage",name:"file-to-upload",id:"file",placeholder:"請輸入圖片連結",onChange:t[2]||(t[2]=(...e)=>d.uploadImage&&d.uploadImage(...e)),accept:"image/*",hidden:""},null,544),Object(o["createVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[3]||(t[3]=(...e)=>d.uploadImage&&d.uploadImage(...e))}," 新增圖片 ")]),Object(o["createVNode"])("div",null,[Object(o["createVNode"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[4]||(t[4]=t=>e.$emit("removeImage"))}," 刪除圖片 ")])]),Object(o["createVNode"])("div",$,[Object(o["createVNode"])("div",_,[S,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":t[5]||(t[5]=e=>r.tempProduct.title=e)},null,512),[[o["vModelText"],r.tempProduct.title]])]),Object(o["createVNode"])("div",R,[Object(o["createVNode"])("div",E,[A,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":t[6]||(t[6]=e=>r.tempProduct.category=e)},null,512),[[o["vModelText"],r.tempProduct.category]])]),Object(o["createVNode"])("div",J,[F,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":t[7]||(t[7]=e=>r.tempProduct.unit=e)},null,512),[[o["vModelText"],r.tempProduct.unit]])])]),Object(o["createVNode"])("div",G,[Object(o["createVNode"])("div",W,[Y,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":t[8]||(t[8]=e=>r.tempProduct.origin_price=e)},null,512),[[o["vModelText"],r.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["createVNode"])("div",q,[z,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":t[9]||(t[9]=e=>r.tempProduct.price=e)},null,512),[[o["vModelText"],r.tempProduct.price,void 0,{number:!0}]])])]),H,Object(o["createVNode"])("div",K,[Q,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":t[10]||(t[10]=e=>r.tempProduct.description=e)},"\n                ",512),[[o["vModelText"],r.tempProduct.description]])]),Object(o["createVNode"])("div",X,[Z,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":t[11]||(t[11]=e=>r.tempProduct.content=e)},"\n                ",512),[[o["vModelText"],r.tempProduct.content]])]),Object(o["createVNode"])("div",ee,[Object(o["createVNode"])("div",te,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[12]||(t[12]=e=>r.tempProduct.is_enabled=e)},null,512),[[o["vModelCheckbox"],r.tempProduct.is_enabled]]),ce])])])])]),Object(o["createVNode"])("div",oe,[ae,Object(o["createVNode"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[13]||(t[13]=t=>e.$emit("changeProducts",r.tempProduct))}," 確認 ")])])])],512)}var de={props:["product"],data(){return{tempProduct:{},image:""}},watch:{product(){this.tempProduct=JSON.parse(JSON.stringify(this.product)),this.image=this.product.imageUrl}},computed:{},mounted(){this.$refs.productModal.addEventListener("hidden.bs.modal",()=>{this.tempProduct={},this.due_date=0})},methods:{async uploadImage(e){this.$refs.uploadImage.click(),this.tempProduct.imageUrl=[],this.image="";const t=this;if(void 0===e.target.files)return;const c=e.target.files[0],o=new FileReader;o.onload=function(e){t.image=e.target.result},o.readAsDataURL(c);const a=new FormData;a.append("file-to-upload",c),await this.axios.post("https://vue3-course-api.hexschool.io/api/traveltime1221/admin/upload",a).then(e=>{e.data.success?(this.tempProduct.imageUrl=e.data.imageUrl,this.$swal.fire({position:"top-end",icon:"success",title:"上傳成功",showConfirmButton:!1,timer:1500})):this.$swal.fire({icon:"error",title:"Oops...",text:e.data.message})}).catch(e=>{this.$swal.fire({icon:"error",title:"Oops...",text:e.data.message})})}}};de.render=re;var le=de,ne=c("ac49"),ie={props:["token"],components:{Pagination:N["a"],DelModal:v["a"],ProdcutInfo:le,InnerBanner:ne["a"]},computed:{...Object(f["b"])({product:"backend/product",pagination:"backend/pagination",productLists:"backend/productLists"})},watch:{product(){this.tempProduct=JSON.parse(JSON.stringify(this.product))}},data(){return{msg:"產品管理",tempProduct:{},image:""}},async created(){await this.$store.dispatch("backend/fetchgetProductLists",1)},mounted(){},methods:{async getProduct(e){await this.$store.commit("backend/SAVE_PRODUCT",e)},async delProduct(e){this.$store.dispatch("backend/fetchRemoveProduct",e)},async changeProducts(e){console.log(e),await this.$store.dispatch("backend/fetchChangeProduct",e)},async changePage(e){await this.$store.dispatch("backend/fetchgetProductLists",e)}}};ie.render=V;t["default"]=ie},ac49:function(e,t,c){"use strict";var o=c("7a23");const a={class:"inner-banner mb-17"},r={class:"text-white h-100 text-7 font-weight-bold\n      d-flex justify-content-center align-items-center\n      position-relative index-carousel"};function d(e,t,c,d,l,n){return Object(o["openBlock"])(),Object(o["createBlock"])("div",a,[Object(o["createVNode"])("div",r,Object(o["toDisplayString"])(c.msg),1)])}var l={props:["msg"],mounted(){console.log(this.msg)}};l.render=d;t["a"]=l},e417:function(e,t,c){"use strict";var o=c("7a23");const a={id:"delModal",ref:"delModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true"},r={class:"modal-dialog modal-dialog-centered"},d={class:"modal-content border-0"},l=Object(o["createVNode"])("div",{class:"modal-header text-black text-center"},[Object(o["createVNode"])("h4",{id:"delModalLabel",class:"modal-title font-weight-bold mx-auto"},[Object(o["createVNode"])("span",null,[Object(o["createVNode"])("b",null,"刪除提示")])])],-1),n={class:"modal-body text-center"},i=Object(o["createVNode"])("span",{class:"material-icons text-danger text-7"}," warning ",-1),s=Object(o["createVNode"])("br",null,null,-1),b=Object(o["createVNode"])("br",null,null,-1),u=Object(o["createTextVNode"])(" 是否刪除 "),p={class:"text-danger"},m=Object(o["createTextVNode"])(" (刪除後將無法恢復)。 "),O={class:"modal-footer"};function j(e,t,c,j,g,h){return Object(o["openBlock"])(),Object(o["createBlock"])("div",a,[Object(o["createVNode"])("div",r,[Object(o["createVNode"])("div",d,[l,Object(o["createVNode"])("div",n,[i,s,b,u,Object(o["createVNode"])("strong",p,Object(o["toDisplayString"])(c.item.title),1),m]),Object(o["createVNode"])("div",O,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-gray-100","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=t=>e.$emit("cancel"))}," 取消 "),Object(o["createVNode"])("button",{type:"button",class:"btn btn-danger text-white","data-bs-dismiss":"modal","data-bs-toggle":"modal","data-bs-target":"#delModal",onClick:t[2]||(t[2]=t=>e.$emit("delItem",c.item.id))}," 確認刪除 ")])])])],512)}var g={props:["item"]};g.render=j;t["a"]=g}}]);
//# sourceMappingURL=chunk-47962ee8.0b34e071.js.map