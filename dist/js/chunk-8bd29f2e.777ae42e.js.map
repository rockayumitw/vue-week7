{"version":3,"sources":["webpack:///./src/views/Dashboard/Coupons.vue","webpack:///./src/components/modal/CouponModal.vue","webpack:///./src/components/modal/CouponModal.vue?0640","webpack:///./src/views/Dashboard/Coupons.vue?1ab2","webpack:///./src/components/modal/DelModal.vue","webpack:///./src/components/modal/DelModal.vue?3d2e"],"names":["class","type","data-bs-toggle","data-bs-target","active","loading","z-index","couponLists","item","key","title","percent","due_date","is_enabled","tempCouponObj","length","current-page","pagination","current_page","total-page","total_pages","changePage","coupon","tempCoupon","updateCoupon","ref","delCoupon","id","tabindex","role","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","for","placeholder","code","min","true-value","false-value","$emit","init","props","Object","this","$refs","couponModal","addEventListener","methods","watch","JSON","parse","stringify","Math","floor","Date","render","components","CouponModal","DelModal","computed","$store","dispatch"],"mappings":"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","file":"js/chunk-8bd29f2e.777ae42e.js","sourcesContent":["<template>\n  <div>\n    <loading :active=\"loading\" :z-index=\"1060\"/>\n    <div class=\"text-end mt-4\">\n      <button class=\"btn btn-primary\"\n      type=\"button\"\n      data-bs-toggle=\"modal\"\n      data-bs-target=\"#couponModal\">\n        建立新的優惠券\n      </button>\n    </div>\n    <table class=\"table mt-4\">\n      <thead>\n      <tr>\n        <th>名稱</th>\n        <th>折扣百分比</th>\n        <th>到期日</th>\n        <th>是否啟用</th>\n        <th>編輯</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr v-for=\"(item, key) in couponLists\" :key=\"key\">\n        <td>{{ item.title }}</td>\n        <td>{{ item.percent }}%</td>\n        <td>{{ item.due_date }}</td>\n        <td>\n          <span v-if=\"item.is_enabled === 1\" class=\"text-success\">啟用</span>\n          <span v-else class=\"text-muted\">未啟用</span>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button\n            class=\"btn btn-outline-primary btn-sm\"\n            data-bs-toggle=\"modal\"\n            data-bs-target=\"#couponModal\"\n            @click=\"tempCouponObj(item)\"\n            >編輯</button>\n            <button class=\"btn btn-outline-danger btn-sm\"\n            data-bs-toggle=\"modal\"\n            data-bs-target=\"#delModal\"\n                    @click=\"tempCouponObj(item)\"\n            >刪除</button>\n          </div>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n    <ul class=\"pagination justify-content-center\">\n        <Pagination\n          :current-page=\"pagination.current_page\"\n          :total-page=\"pagination.total_pages\"\n          @change-page=\"changePage\"\n          v-if=\"couponLists.length > 1\"\n        ></Pagination>\n      </ul>\n    <CouponModal :coupon=\"tempCoupon\" @update-coupon=\"updateCoupon\"/>\n    <DelModal :item=\"tempCoupon\" ref=\"delModal\" @del-item=\"delCoupon\"/>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport CouponModal from '@/components/modal/CouponModal.vue';\nimport DelModal from '@/components/modal/DelModal.vue';\n\nexport default {\n  components: { CouponModal, DelModal },\n  data() {\n    return {\n      tempCoupon: {\n        title: '',\n        is_enabled: 0,\n        percent: 100,\n        code: '',\n      },\n    };\n  },\n  computed: {\n    ...mapGetters({\n      loading: 'all/loading',\n      couponLists: 'backend/couponLists',\n      pagination: 'backend/pagination',\n    }),\n  },\n  async created() {\n    await this.$store.dispatch('backend/fetchGetCoupons');\n  },\n  methods: {\n    async tempCouponObj(coupon) {\n      this.tempCoupon = JSON.parse(JSON.stringify(coupon));\n    },\n    async updateCoupon(tempCoupon) {\n      await this.$store.dispatch('backend/fetchChangeCoupons', tempCoupon);\n    },\n    async delCoupon(coupon) {\n      await this.$store.dispatch('backend/fetchRemoveSingleCoupon', coupon.id);\n    },\n  },\n};\n</script>\n","<template>\n  <div\n  class=\"modal fade\" id=\"couponModal\" tabindex=\"-1\" role=\"dialog\"\n       aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\"\n       ref=\"couponModal\" data-bs-target=\"#couponModal\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span v-if=\"tempCoupon.id\">新增優惠卷</span>\n            <span v-else>編輯優惠卷</span>\n          </h5>\n          <button type=\"button\" class=\"btn-close\"\n                  data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"mb-3\">\n            <label for=\"title\">標題</label>\n            <input type=\"text\" class=\"form-control\" id=\"title\" v-model=\"tempCoupon.title\"\n                   placeholder=\"請輸入標題\">\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"coupon_code\">優惠碼</label>\n            <input type=\"text\" class=\"form-control\" id=\"coupon_code\" v-model=\"tempCoupon.code\"\n                   placeholder=\"請輸入優惠碼\">\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"due_date\">到期日</label>\n            <input type=\"date\" class=\"form-control\" id=\"due_date\"\n                   v-model=\"due_date\">\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"price\">折扣百分比</label>\n            <input type=\"number\" class=\"form-control\" id=\"price\"\n            min=\"0\"\n                   v-model.number=\"tempCoupon.percent\" placeholder=\"請輸入折扣百分比\">\n          </div>\n          <div class=\"mb-3\">\n            <div class=\"form-check\">\n              <input class=\"form-check-input\" type=\"checkbox\"\n                     :true-value=\"1\"\n                     :false-value=\"0\"\n                     v-model=\"tempCoupon.is_enabled\" id=\"is_enabled\">\n              <label class=\"form-check-label\" for=\"is_enabled\">\n                是否啟用\n              </label>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\"\n                  @click=\"$emit('update-coupon', tempCoupon), init()\">更新優惠券\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n\nexport default {\n  props: {\n    coupon: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  data() {\n    return {\n      tempCoupon: {},\n      due_date: '',\n    };\n  },\n  mounted() {\n    this.$refs.couponModal.addEventListener('hidden.bs.modal', () => {\n      this.tempCoupon = {};\n      this.due_date = 0;\n    });\n  },\n  methods: {\n    init() {\n      this.tempCoupon = {};\n    },\n  },\n  watch: {\n    coupon() {\n      this.tempCoupon = JSON.parse(JSON.stringify(this.coupon));\n    },\n    due_date() {\n      this.tempCoupon.due_date = Math.floor(new Date(this.due_date) / 1000);\n    },\n    // coupon() {\n    //   this.tempCoupon = this.coupon;\n    //   // 將時間格式改為 YYYY-MM-DD\n    //   const dateAndTime = new Date(this.tempCoupon.due_date * 1000)\n    //     .toISOString().split('T');\n    //   [this.due_date] = dateAndTime;\n    // },\n  },\n};\n</script>\n","import { render } from \"./CouponModal.vue?vue&type=template&id=f3c93abe\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Coupons.vue?vue&type=template&id=40088aee\"\nimport script from \"./Coupons.vue?vue&type=script&lang=js\"\nexport * from \"./Coupons.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div\n    id=\"delModal\"\n    ref=\"delModal\"\n    class=\"modal fade\"\n    tabindex=\"-1\"\n    aria-labelledby=\"delModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header text-black text-center\">\n          <h5 id=\"delModalLabel\" class=\"modal-title font-weight-bold\">\n            <span>刪除提示</span>\n          </h5>\n        </div>\n        <div class=\"modal-body text-center\">\n          <i class=\"fas fa-exclamation-triangle text-danger\"></i><br /><br />\n          是否刪除\n          <strong class=\"text-danger\">{{ item.title }}</strong> (刪除後將無法恢復)。\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-secondary\"\n            data-bs-dismiss=\"modal\"\n            @click=\"$emit('cancel')\"\n          >\n            取消\n          </button>\n          <button type=\"button\"\n          class=\"btn btn-danger\" data-bs-dismiss=\"modal\"\n          data-bs-toggle=\"modal\"\n          data-bs-target=\"#delModal\"\n          @click=\"$emit('delItem', item.id)\">\n            確認刪除\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  props: ['item'],\n};\n</script>\n","import { render } from \"./DelModal.vue?vue&type=template&id=13e4735c\"\nimport script from \"./DelModal.vue?vue&type=script&lang=js\"\nexport * from \"./DelModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}