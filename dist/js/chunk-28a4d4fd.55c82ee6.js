(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28a4d4fd"],{9097:function(e,t,o){"use strict";o.r(t);var a=o("7a23");const c={class:"container"},n=Object(a["createVNode"])("div",{class:"text-end mt-4"},[Object(a["createVNode"])("button",{class:"btn btn-secondary text-white mb-2",type:"button","data-bs-toggle":"modal","data-bs-target":"#couponModal"}," 建立新的優惠券 ")],-1),l={class:"table"},d=Object(a["createStaticVNode"])('<div class="table-thead row text-white w-100 py-3 align-items-center gx-1"><div class="col-3">名稱</div><div class="col-2 text-center"> 折扣 </div><div class="col-3 text-center">到期日</div><div class="col-2 text-center"> 狀態 </div><div class="col-2 text-center">編輯</div></div>',1),s={class:"col-3"},r={class:"col-2 text-center"},i={class:"col-3 text-center"},b={class:"col-2 text-center"},p={key:0,class:"text-success"},u=Object(a["createVNode"])("span",{class:"material-icons"},"toggle_on",-1),m={key:1,class:"text-muted"},O=Object(a["createVNode"])("span",{class:"material-icons"},"toggle_on",-1),j={class:"col-2 text-center"},g={class:"btn-group p-0 p-md-1"},v=Object(a["createVNode"])("span",{class:"material-icons text-3"},"edit",-1),V=Object(a["createVNode"])("span",{class:"material-icons text-3"},"delete",-1),N={class:"pagination justify-content-center"};function h(e,t,o,h,C,k){const x=Object(a["resolveComponent"])("InnerBanner"),f=Object(a["resolveComponent"])("Pagination"),y=Object(a["resolveComponent"])("CouponModal"),w=Object(a["resolveComponent"])("DelModal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(x,{msg:C.msg},null,8,["msg"]),Object(a["createVNode"])("div",c,[n,Object(a["createVNode"])("div",l,[d,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.couponLists,(t,o)=>(Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"table-tr row text-white w-100 align-items-center py-3 align-items-center gx-1",key:o},[Object(a["createVNode"])("div",s,Object(a["toDisplayString"])(t.title),1),Object(a["createVNode"])("div",r,Object(a["toDisplayString"])(t.percent)+"%",1),Object(a["createVNode"])("div",i,Object(a["toDisplayString"])(e.$filters.date(t.due_date)),1),Object(a["createVNode"])("div",b,[1===t.is_enabled?(Object(a["openBlock"])(),Object(a["createBlock"])("span",p,[u])):(Object(a["openBlock"])(),Object(a["createBlock"])("span",m,[O]))]),Object(a["createVNode"])("div",j,[Object(a["createVNode"])("div",g,[Object(a["createVNode"])("button",{class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#couponModal",onClick:e=>k.tempCouponObj(t)},[v],8,["onClick"]),Object(a["createVNode"])("button",{class:"btn btn-outline-danger btn-sm","data-bs-toggle":"modal","data-bs-target":"#delModal",onClick:e=>k.tempCouponObj(t)},[V],8,["onClick"])])])]))),128))]),Object(a["createVNode"])("ul",N,[e.couponLists.length>1?(Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:0,"current-page":e.pagination.current_page,"total-page":e.pagination.total_pages,onChangePage:e.changePage},null,8,["current-page","total-page","onChangePage"])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])(y,{coupon:C.tempCoupon,onUpdateCoupon:k.updateCoupon},null,8,["coupon","onUpdateCoupon"]),Object(a["createVNode"])(w,{item:C.tempCoupon,ref:"delModal",onDelItem:k.delCoupon},null,8,["item","onDelItem"])])],64)}var C=o("5502");const k={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"couponModal","data-bs-target":"#couponModal"},x={class:"modal-dialog",role:"document"},f={class:"modal-content"},y={class:"modal-header"},w={class:"modal-title font-weight-bold",id:"exampleModalLabel"},M={key:0},B={key:1},_=Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),D={class:"modal-body"},S={class:"mb-3"},L=Object(a["createVNode"])("label",{for:"title"},"標題",-1),$={class:"mb-3"},U=Object(a["createVNode"])("label",{for:"coupon_code"},"優惠碼",-1),J={class:"mb-3"},T=Object(a["createVNode"])("label",{for:"due_date"},"到期日",-1),I={class:"mb-3"},P=Object(a["createVNode"])("label",{for:"price"},"折扣百分比",-1),F={class:"mb-3"},E={class:"form-check"},G=Object(a["createVNode"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),R={class:"modal-footer"},q=Object(a["createVNode"])("button",{type:"button",class:"btn btn-gray-100","data-bs-dismiss":"modal"},"取消",-1);function z(e,t,o,c,n,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",k,[Object(a["createVNode"])("div",x,[Object(a["createVNode"])("div",f,[Object(a["createVNode"])("div",y,[Object(a["createVNode"])("h4",w,[n.tempCoupon.id?(Object(a["openBlock"])(),Object(a["createBlock"])("span",M,"編輯優惠卷")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",B,"新增優惠卷"))]),_]),Object(a["createVNode"])("div",D,[Object(a["createVNode"])("div",S,[L,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>n.tempCoupon.title=e),placeholder:"請輸入標題"},null,512),[[a["vModelText"],n.tempCoupon.title]])]),Object(a["createVNode"])("div",$,[U,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control",id:"coupon_code","onUpdate:modelValue":t[2]||(t[2]=e=>n.tempCoupon.code=e),placeholder:"請輸入優惠碼"},null,512),[[a["vModelText"],n.tempCoupon.code]])]),Object(a["createVNode"])("div",J,[T,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"date",class:"form-control",id:"due_date","onUpdate:modelValue":t[3]||(t[3]=e=>n.due_date=e)},null,512),[[a["vModelText"],n.due_date]])]),Object(a["createVNode"])("div",I,[P,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"number",class:"form-control",id:"price",min:"0","onUpdate:modelValue":t[4]||(t[4]=e=>n.tempCoupon.percent=e),placeholder:"請輸入折扣百分比"},null,512),[[a["vModelText"],n.tempCoupon.percent,void 0,{number:!0}]])]),Object(a["createVNode"])("div",F,[Object(a["createVNode"])("div",E,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[5]||(t[5]=e=>n.tempCoupon.is_enabled=e),id:"is_enabled"},null,512),[[a["vModelCheckbox"],n.tempCoupon.is_enabled]]),G])])]),Object(a["createVNode"])("div",R,[q,Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary text-white","data-bs-dismiss":"modal",onClick:t[6]||(t[6]=t=>(e.$emit("update-coupon",n.tempCoupon),l.init()))},"確定 ")])])])],512)}var A={props:{coupon:{type:Object,default(){return{}}}},data(){return{tempCoupon:{},due_date:""}},mounted(){this.$refs.couponModal.addEventListener("hidden.bs.modal",()=>{this.tempCoupon={},this.due_date=0})},methods:{init(){this.tempCoupon={}}},watch:{coupon(){this.tempCoupon=JSON.parse(JSON.stringify(this.coupon))},due_date(){this.tempCoupon.due_date=Math.floor(new Date(this.due_date)/1e3)}}};A.render=z;var H=A,K=o("e417"),Q=o("ac49"),W={components:{CouponModal:H,DelModal:K["a"],InnerBanner:Q["a"]},data(){return{msg:"優惠券管理",tempCoupon:{title:"",is_enabled:0,percent:100,code:""}}},computed:{...Object(C["b"])({couponLists:"backend/couponLists",pagination:"backend/pagination"})},async created(){await this.$store.dispatch("backend/fetchGetCoupons")},methods:{async tempCouponObj(e){this.tempCoupon=JSON.parse(JSON.stringify(e))},async updateCoupon(e){await this.$store.dispatch("backend/fetchChangeCoupons",e)},async delCoupon(e){await this.$store.dispatch("backend/fetchRemoveSingleCoupon",e)}}};W.render=h;t["default"]=W},ac49:function(e,t,o){"use strict";var a=o("7a23");const c={class:"inner-banner mb-17"},n={class:"text-white h-100 text-7 font-weight-bold\n      d-flex justify-content-center align-items-center\n      position-relative index-carousel"};function l(e,t,o,l,d,s){return Object(a["openBlock"])(),Object(a["createBlock"])("div",c,[Object(a["createVNode"])("div",n,Object(a["toDisplayString"])(o.msg),1)])}var d={props:["msg"],mounted(){console.log(this.msg)}};d.render=l;t["a"]=d},e417:function(e,t,o){"use strict";var a=o("7a23");const c={id:"delModal",ref:"delModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true"},n={class:"modal-dialog modal-dialog-centered"},l={class:"modal-content border-0"},d=Object(a["createVNode"])("div",{class:"modal-header text-black text-center"},[Object(a["createVNode"])("h4",{id:"delModalLabel",class:"modal-title font-weight-bold mx-auto"},[Object(a["createVNode"])("span",null,[Object(a["createVNode"])("b",null,"刪除提示")])])],-1),s={class:"modal-body text-center"},r=Object(a["createVNode"])("span",{class:"material-icons text-danger text-7"}," warning ",-1),i=Object(a["createVNode"])("br",null,null,-1),b=Object(a["createVNode"])("br",null,null,-1),p=Object(a["createTextVNode"])(" 是否刪除 "),u={class:"text-danger"},m=Object(a["createTextVNode"])(" (刪除後將無法恢復)。 "),O={class:"modal-footer"};function j(e,t,o,j,g,v){return Object(a["openBlock"])(),Object(a["createBlock"])("div",c,[Object(a["createVNode"])("div",n,[Object(a["createVNode"])("div",l,[d,Object(a["createVNode"])("div",s,[r,i,b,p,Object(a["createVNode"])("strong",u,Object(a["toDisplayString"])(o.item.title),1),m]),Object(a["createVNode"])("div",O,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-gray-100","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=t=>e.$emit("cancel"))}," 取消 "),Object(a["createVNode"])("button",{type:"button",class:"btn btn-danger text-white","data-bs-dismiss":"modal","data-bs-toggle":"modal","data-bs-target":"#delModal",onClick:t[2]||(t[2]=t=>e.$emit("delItem",o.item.id))}," 確認刪除 ")])])])],512)}var g={props:["item"]};g.render=j;t["a"]=g}}]);
//# sourceMappingURL=chunk-28a4d4fd.55c82ee6.js.map