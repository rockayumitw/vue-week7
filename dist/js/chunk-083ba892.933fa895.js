(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-083ba892"],{"888d":function(e,t,c){"use strict";c.r(t);c("e01a");var a=c("7a23");const l={class:"inner-banner mb-17"},o={class:"text-end mb-4"},r={class:"table"},i=Object(a["createStaticVNode"])('<div class="table-thead row text-white w-100 py-3 align-items-center gx-1"><div class="col-3 col-md-2">標題</div><div class="col-2 text-center"> 作者 </div><div class="col-2 text-center d-none d-md-block">描述</div><div class="col-3 col-md-2 text-center"> 建立時間 </div><div class="col-2 text-center">狀態</div><div class="col-2 text-center">編輯</div></div>',1),d={class:"col-3 col-md-2"},s={class:"col-2 text-center"},n={class:"col-2 text-left overflow-hidden d-none d-md-block"},b={class:"col-3 col-md-2 text-center"},m={class:"col-2 text-center"},p={key:0,class:"text-success"},O=Object(a["createVNode"])("span",{class:"material-icons"},"toggle_on",-1),j={key:1,class:"text-muted"},u=Object(a["createVNode"])("span",{class:"material-icons"},"toggle_on",-1),V={class:"col-2 text-center"},h={class:"btn-group p-0 p-md-1"},v=Object(a["createVNode"])("span",{class:"material-icons text-3"},"edit",-1),g=Object(a["createVNode"])("span",{class:"material-icons text-3"},"delete",-1);function N(e,t,c,N,k,f){const x=Object(a["resolveComponent"])("InnerBanner"),y=Object(a["resolveComponent"])("ArticleModal"),A=Object(a["resolveComponent"])("DelModal");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])("div",l,[Object(a["createVNode"])(x,{msg:k.msg},null,8,["msg"])]),Object(a["createVNode"])("div",o,[Object(a["createVNode"])("button",{class:"btn btn-secondary text-white",type:"button",onClick:t[1]||(t[1]=t=>e.$refs.articleModal.modal("show"))}," 建立新的頁面 ")]),Object(a["createVNode"])("div",r,[i,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.articleLists,t=>(Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"table-tr row text-white w-100 align-items-center py-3 align-items-center gx-1",key:t.id},[Object(a["createVNode"])("div",d,Object(a["toDisplayString"])(t.title),1),Object(a["createVNode"])("div",s,Object(a["toDisplayString"])(t.author),1),Object(a["createVNode"])("div",n,[Object(a["createVNode"])("div",{class:"ellipsis py-0",innerHTML:t.description},null,8,["innerHTML"])]),Object(a["createVNode"])("div",b,Object(a["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(a["createVNode"])("div",m,[t.isPublic?(Object(a["openBlock"])(),Object(a["createBlock"])("span",p,[O])):(Object(a["openBlock"])(),Object(a["createBlock"])("span",j,[u]))]),Object(a["createVNode"])("div",V,[Object(a["createVNode"])("div",h,[Object(a["createVNode"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:e=>f.getArticle(t),"data-bs-toggle":"modal","data-bs-target":"#articleModal"},[v],8,["onClick"]),Object(a["createVNode"])("button",{class:"btn btn-outline-danger btn-sm",type:"button","data-bs-toggle":"modal","data-bs-target":"#delModal",onClick:e=>f.getArticle(t)},[g],8,["onClick"])])])]))),128))]),Object(a["createVNode"])(y,{ref:"articleModal",article:k.tempArticle,onUpdateArticle:f.updateArticle},null,8,["article","onUpdateArticle"]),Object(a["createVNode"])(A,{item:k.tempArticle,ref:"delModal",onDelItem:f.delArticle},null,8,["item","onDelItem"])])}var k=c("5502");const f={class:"modal fade",id:"articleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"articleModal"},x={class:"modal-dialog modal-xl",role:"document"},y={class:"modal-content border-0"},A={class:"modal-header bg-dark text-white"},w={class:"modal-title",id:"exampleModalLabel"},M={key:0},B={key:1},C=Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),D={class:"modal-body"},T={class:"row needs-validation",novalidate:""},_={class:"col-md-4"},L={class:"mb-3"},U=Object(a["createVNode"])("label",{for:"title",class:"form-label"},[Object(a["createVNode"])("small",{class:"text-danger"},"*"),Object(a["createTextVNode"])(" 標題 ")],-1),S={class:"mb-3"},P=Object(a["createVNode"])("label",{for:"image",class:"form-label"},"輸入圖片網址",-1),$={class:"mb-3"},q=Object(a["createVNode"])("label",{for:"author",class:"form-label"},[Object(a["createVNode"])("small",{class:"text-danger"},"*"),Object(a["createTextVNode"])(" 作者 ")],-1),I={class:"mb-3"},J=Object(a["createVNode"])("label",{for:"create_at"},[Object(a["createVNode"])("small",{class:"text-danger"},"*"),Object(a["createTextVNode"])(" 文章建立日期 ")],-1),E={class:"col-md-8"},F=Object(a["createVNode"])("label",{for:"tag",class:"form-label"},"標籤",-1),H={class:"row gx-1 mb-3"},G={class:"input-group input-group-sm"},R=Object(a["createVNode"])("i",{class:"bi bi-x"},null,-1),z={key:0,class:"col-md-2 mb-1"},K=Object(a["createVNode"])("label",{for:"content",class:"form-label"},[Object(a["createVNode"])("small",{class:"text-danger"},"*"),Object(a["createTextVNode"])(" 文章描述 ")],-1),Q={class:"mb-3"},W={class:"mb-3"},X={class:"form-check"},Y=Object(a["createVNode"])("label",{class:"form-check-label",for:"isPublic"},[Object(a["createVNode"])("small",{class:"text-danger"},"*"),Object(a["createTextVNode"])(" 是否公開 ")],-1),Z={class:"d-flex justify-content-end"},ee=Object(a["createVNode"])("button",{type:"button",class:"btn btn-gray-100 mr-2","data-bs-dismiss":"modal"}," 取消 ",-1);function te(e,t,c,l,o,r){const i=Object(a["resolveComponent"])("ckeditor");return Object(a["openBlock"])(),Object(a["createBlock"])("div",f,[Object(a["createVNode"])("div",x,[Object(a["createVNode"])("div",y,[Object(a["createVNode"])("div",A,[Object(a["createVNode"])("h5",w,[void 0==o.tempArticle.id?(Object(a["openBlock"])(),Object(a["createBlock"])("span",M,"新增貼文")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",B,"編輯貼文"))]),C]),Object(a["createVNode"])("div",D,[Object(a["createVNode"])("form",T,[Object(a["createVNode"])("div",_,[Object(a["createVNode"])("div",L,[U,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>o.tempArticle.title=e),placeholder:"請輸入標題",required:""},null,512),[[a["vModelText"],o.tempArticle.title]])]),Object(a["createVNode"])("div",S,[P,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":t[2]||(t[2]=e=>o.tempArticle.imageUrl=e),placeholder:"請輸入圖片連結"},null,512),[[a["vModelText"],o.tempArticle.imageUrl]])]),Object(a["createVNode"])("div",$,[q,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control",id:"author","onUpdate:modelValue":t[3]||(t[3]=e=>o.tempArticle.author=e),placeholder:"請輸入標題",required:""},null,512),[[a["vModelText"],o.tempArticle.author]])]),Object(a["createVNode"])("div",I,[J,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"date",class:"form-control",id:"create_at","onUpdate:modelValue":t[4]||(t[4]=e=>o.create_at=e),required:""},null,512),[[a["vModelText"],o.create_at]])])]),Object(a["createVNode"])("div",E,[F,Object(a["createVNode"])("div",H,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.tempArticle.tag,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"col-md-3 mb-1",key:t},[Object(a["createVNode"])("div",G,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control form-control",id:"tag","onUpdate:modelValue":e=>o.tempArticle.tag[t]=e,placeholder:"請輸入標籤"},null,8,["onUpdate:modelValue"]),[[a["vModelText"],o.tempArticle.tag[t]]]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>o.tempArticle.tag.splice(t,1)},[R],8,["onClick"])])]))),128)),o.tempArticle.tag[o.tempArticle.tag.length-1]||!o.tempArticle.tag.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",z,[Object(a["createVNode"])("button",{class:"btn btn-secondary btn-sm w-100 text-white",onClick:t[5]||(t[5]=e=>o.tempArticle.tag.push(""))}," 新增標籤 ")])):Object(a["createCommentVNode"])("",!0)]),K,Object(a["createVNode"])("div",Q,[Object(a["createVNode"])(i,{editor:o.editor,config:o.editorConfig,modelValue:o.tempArticle.description,"onUpdate:modelValue":t[6]||(t[6]=e=>o.tempArticle.description=e),required:""},null,8,["editor","config","modelValue"])]),Object(a["createVNode"])("div",W,[Object(a["createVNode"])("div",X,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>o.tempArticle.isPublic=e),id:"isPublic",required:""},null,512),[[a["vModelCheckbox"],o.tempArticle.isPublic]]),Y])])]),Object(a["createVNode"])("div",Z,[ee,Object(a["createVNode"])("button",{type:"submit",class:"btn btn-secondary text-white",onClick:t[8]||(t[8]=e=>r.updateArticle())}," 確認 ")])])])])])],512)}c("ddb0");var ce=c("fb3d"),ae=c.n(ce),le=c("7c2b"),oe=c.n(le),re={props:{article:{type:Object,default(){return{articleModal:""}}}},data(){return{tempArticle:{tag:[""]},create_at:0,editor:ae.a,editorConfig:{toolbar:["heading","typing","bold","italic","|","link"]}}},watch:{article(){this.tempArticle={...this.article,tag:this.article.tag||[],isPublic:this.article.isPublic||!1},[this.create_at]=new Date(1e3*this.tempArticle.create_at).toISOString().split("T")},create_at(){this.tempArticle.create_at=Math.floor(new Date(this.create_at)/1e3)}},mounted(){this.articleModal=new oe.a(this.$refs.articleModal,{keyboard:!1,backdrop:"static"}),this.$refs.articleModal.addEventListener("hidden.bs.modal",()=>{this.init()})},methods:{init(){this.tempArticle={tag:[""]},this.create_at=0;const e=document.querySelector(".needs-validation");e.classList.remove("was-validated")},modal(e){switch(e){case"show":this.articleModal.show();break;case"hide":this.articleModal.hide();break;default:}},updateArticle(){let e=!1;const t=document.querySelectorAll(".needs-validation");console.log(t),Array.prototype.slice.call(t).forEach(t=>{console.log(t),t.addEventListener("submit",c=>{console.log(c),console.log(t.checkValidity()),t.checkValidity()?e=!0:(c.preventDefault(),c.stopPropagation(),e=!1),t.classList.add("was-validated")},!1)}),setTimeout(()=>{e&&(this.modal("hide"),this.$emit("update-article",this.tempArticle),this.init())})}}};c("cb94");re.render=te;var ie=re,de=c("e417"),se=c("ac49"),ne={data(){return{msg:"文章管理",tempArticle:{}}},components:{DelModal:de["a"],ArticleModal:ie,InnerBanner:se["a"]},computed:{...Object(k["b"])({articleLists:"backend/articleLists"})},async created(){await this.$store.dispatch("backend/fetchGetArticles",1)},methods:{getArticle(e){this.tempArticle=JSON.parse(JSON.stringify(e))},async updateArticle(e){await this.$store.dispatch("backend/fetchUpdateArticle",e)},async delArticle(e){await this.$store.dispatch("backend/fetchRemoveArticle",e)}}};ne.render=N;t["default"]=ne},aa2f:function(e,t,c){},cb94:function(e,t,c){"use strict";c("aa2f")}}]);
//# sourceMappingURL=chunk-083ba892.933fa895.js.map