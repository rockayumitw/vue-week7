(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e6c62dc"],{1799:function(e,t,c){"use strict";var o=c("7a23");function a(e,t,c,a,r,l){return Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(c.totalPage,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:["page-item",e==c.currentPage?"active":""],key:t},[Object(o["createVNode"])("a",{class:"page-link",href:"javascript:;",onClick:t=>l.goTop(e)},Object(o["toDisplayString"])(e),9,["onClick"])],2))),128)}var r=c("1157"),l=c.n(r),d={props:["currentPage","totalPage"],data(){return{}},methods:{goTop(e){this.$emit("changePage",e),l()("html, body").animate({scrollTop:250},"fast")}}};d.render=a;t["a"]=d},"1fae":function(e,t,c){"use strict";c.r(t);var o=c("7a23");const a={class:"container"},r={class:"btn-area text-end mt-4"},l={class:"table-box"},d={class:"table"},i=Object(o["createStaticVNode"])('<div class="table-thead row text-white w-100 py-3 align-items-center gx-1"><div class="col-2">類別</div><div class="col-4 col-md-2">產品名稱</div><div class="col-2 d-none d-md-block">產品圖片</div><div class="col-2 text-right">價格</div><div class="col-2 text-center">狀態</div><div class="col-2 text-center">功能</div></div>',1),s={class:"col-2"},n={class:"col-4 col-md-2"},b={class:"d-block"},p={class:"col-2 d-none d-md-block"},u={class:"col-2 text-right"},m={key:0,class:"text-1 text-gray-200 p-0 d-block"},g={class:"p-0"},O={class:"col-2 text-center"},j={key:0,class:"material-icons text-success"},h={key:1,class:"material-icons"},V={class:"col-2 text-center"},N={class:"btn-group p-0 p-md-1"},v=Object(o["createVNode"])("span",{class:"material-icons text-3"},"edit",-1),f=Object(o["createVNode"])("span",{class:"material-icons text-3"},"delete",-1),k={class:"pagination justify-content-center"};function P(e,t,c,P,y,x){const w=Object(o["resolveComponent"])("InnerBanner"),B=Object(o["resolveComponent"])("Pagination"),C=Object(o["resolveComponent"])("DelModal"),M=Object(o["resolveComponent"])("ProductModal");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(w,{msg:y.msg},null,8,["msg"]),Object(o["createVNode"])("div",a,[Object(o["createVNode"])("div",r,[Object(o["createVNode"])("button",{class:"btn btn-secondary font-weight-bold float-end mb-5 text-white",onClick:t[1]||(t[1]=t=>e.$refs.productModal.modal("show"))}," 新增產品 ")]),Object(o["createVNode"])("div",l,[Object(o["createVNode"])("div",d,[i,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.productLists,(t,c)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"table-tr row text-white w-100 align-items-center py-3 align-items-center gx-1",key:c},[Object(o["createVNode"])("div",s,Object(o["toDisplayString"])(t.category),1),Object(o["createVNode"])("div",n,[Object(o["createVNode"])("span",b,Object(o["toDisplayString"])(t.title),1),""!=t.imageUrl?(Object(o["openBlock"])(),Object(o["createBlock"])("img",{key:0,class:"d-block d-md-none",width:"80",src:t.imageUrl,alt:""},null,8,["src"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",p,[""!=t.imageUrl?(Object(o["openBlock"])(),Object(o["createBlock"])("img",{key:0,width:"150",src:t.imageUrl,alt:""},null,8,["src"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",u,[t.origin_price?(Object(o["openBlock"])(),Object(o["createBlock"])("del",m,Object(o["toDisplayString"])(e.$filters.currency(t.origin_price)),1)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("span",g,Object(o["toDisplayString"])(e.$filters.currency(t.price)),1)]),Object(o["createVNode"])("div",O,[t.is_enabled?(Object(o["openBlock"])(),Object(o["createBlock"])("span",j,"toggle_on")):(Object(o["openBlock"])(),Object(o["createBlock"])("span",h,"toggle_off"))]),Object(o["createVNode"])("div",V,[Object(o["createVNode"])("div",N,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:c=>(x.getProduct(t),e.$refs.productModal.modal("show"))},[v],8,["onClick"]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-danger","data-bs-toggle":"modal","data-bs-target":"#delModal",onClick:e=>x.getProduct(t)},[f],8,["onClick"])])])]))),128))])]),Object(o["createVNode"])("ul",k,[e.productLists.length>1?(Object(o["openBlock"])(),Object(o["createBlock"])(B,{key:0,"current-page":e.pagination.current_page,"total-page":e.pagination.total_pages,onChangePage:x.changePage},null,8,["current-page","total-page","onChangePage"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(C,{item:y.tempProduct,onDelItem:x.delProduct,onCancel:e.cancel},null,8,["item","onDelItem","onCancel"]),Object(o["createVNode"])(M,{ref:"productModal",onChangeProducts:x.changeProducts,product:y.tempProduct},null,8,["onChangeProducts","product"])])],64)}var y=c("1799"),x=c("5502"),w=c("e417");c("ddb0"),c("e01a");const B={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true","data-bs-target":"#productModal"},C={class:"modal-dialog modal-xl modal-dialog-centered"},M={class:"modal-content border-0"},U={class:"modal-header border-bottom-0"},$={id:"productModalLabel",class:"modal-title text-black font-weight-bold"},D={key:0},_={key:1},S={class:"modal-body"},T={class:"row needs-validation",novalidate:""},I={class:"col-sm-12 col-lg-4"},L={class:"mb-1"},E={class:"form-group"},q=Object(o["createVNode"])("label",{for:"imageUrl"}," 輸入圖片網址 ",-1),R={key:0,class:"fas fa-spinner fa-pulse"},J=Object(o["createTextVNode"])(" 新增圖片 "),A={class:"col-sm-12 col-lg-8"},F={class:"form-group"},z=Object(o["createVNode"])("label",{for:"title"},[Object(o["createVNode"])("small",{class:"text-danger"},"*"),Object(o["createTextVNode"])(" 標題 ")],-1),G={class:"row"},H={class:"form-group col-md-6"},K=Object(o["createVNode"])("label",{for:"category"},[Object(o["createVNode"])("small",{class:"text-danger"},"*"),Object(o["createTextVNode"])(" 分類 ")],-1),Q={class:"form-group col-md-6"},W=Object(o["createVNode"])("label",{for:"unit"},[Object(o["createVNode"])("small",{class:"text-danger"},"*"),Object(o["createTextVNode"])(" 單位 ")],-1),X={class:"row"},Y={class:"form-group col-md-6"},Z=Object(o["createVNode"])("label",{for:"origin_price"},[Object(o["createVNode"])("small",{class:"text-danger"},"*"),Object(o["createTextVNode"])(" 原價 ")],-1),ee={class:"form-group col-md-6"},te=Object(o["createVNode"])("label",{for:"price"},[Object(o["createVNode"])("small",{class:"text-danger"},"*"),Object(o["createTextVNode"])(" 售價 ")],-1),ce=Object(o["createVNode"])("hr",null,null,-1),oe={class:"form-group"},ae=Object(o["createVNode"])("label",{for:"description"},"產品描述",-1),re={class:"form-group"},le=Object(o["createVNode"])("label",{for:"content"},"說明內容",-1),de={class:"form-group"},ie={class:"form-check"},se=Object(o["createVNode"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),ne={class:"d-flex justify-content-end"},be=Object(o["createVNode"])("button",{type:"button",class:"btn btn-gray-100 text-white mr-1","data-bs-dismiss":"modal"}," 取消 ",-1);function pe(e,t,c,a,r,l){const d=Object(o["resolveComponent"])("ckeditor");return Object(o["openBlock"])(),Object(o["createBlock"])("div",B,[Object(o["createVNode"])("div",C,[Object(o["createVNode"])("div",M,[Object(o["createVNode"])("div",U,[Object(o["createVNode"])("h4",$,[void 0==r.tempProduct.id?(Object(o["openBlock"])(),Object(o["createBlock"])("span",D,"新增產品")):(Object(o["openBlock"])(),Object(o["createBlock"])("span",_,"編輯產品"))])]),Object(o["createVNode"])("div",S,[Object(o["createVNode"])("form",T,[Object(o["createVNode"])("div",I,[Object(o["createVNode"])("div",L,[Object(o["createVNode"])("div",E,[q,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"imageUrl",type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":t[1]||(t[1]=e=>r.tempProduct.imageUrl=e)},null,512),[[o["vModelText"],r.tempProduct.imageUrl]])]),Object(o["createVNode"])("img",{class:"img-fluid",src:r.image,alt:""},null,8,["src"])]),Object(o["createVNode"])("div",null,[Object(o["createVNode"])("input",{type:"file",ref:"uploadImage",class:"form-control js-uploadImage",name:"file-to-upload",id:"file",placeholder:"請輸入圖片連結",onChange:t[2]||(t[2]=(...e)=>l.uploadImage&&l.uploadImage(...e)),accept:"image/*",hidden:""},null,544),Object(o["createVNode"])("button",{class:"btn btn-outline-secondary btn-sm d-block w-100",type:"button",disabled:e.spinner,onClick:t[3]||(t[3]=(...e)=>l.uploadImage&&l.uploadImage(...e))},[e.spinner?(Object(o["openBlock"])(),Object(o["createBlock"])("i",R)):Object(o["createCommentVNode"])("",!0),J],8,["disabled"])]),Object(o["createVNode"])("div",null,[Object(o["createVNode"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[4]||(t[4]=t=>e.$emit("removeImage"))}," 刪除圖片 ")])]),Object(o["createVNode"])("div",A,[Object(o["createVNode"])("div",F,[z,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":t[5]||(t[5]=e=>r.tempProduct.title=e),required:""},null,512),[[o["vModelText"],r.tempProduct.title]])]),Object(o["createVNode"])("div",G,[Object(o["createVNode"])("div",H,[K,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":t[6]||(t[6]=e=>r.tempProduct.category=e),required:""},null,512),[[o["vModelText"],r.tempProduct.category]])]),Object(o["createVNode"])("div",Q,[W,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":t[7]||(t[7]=e=>r.tempProduct.unit=e),required:""},null,512),[[o["vModelText"],r.tempProduct.unit]])])]),Object(o["createVNode"])("div",X,[Object(o["createVNode"])("div",Y,[Z,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":t[8]||(t[8]=e=>r.tempProduct.origin_price=e),required:""},null,512),[[o["vModelText"],r.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["createVNode"])("div",ee,[te,Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":t[9]||(t[9]=e=>r.tempProduct.price=e),required:""},null,512),[[o["vModelText"],r.tempProduct.price,void 0,{number:!0}]])])]),ce,Object(o["createVNode"])("div",oe,[ae,Object(o["createVNode"])(d,{editor:r.editor,config:r.editorConfig,modelValue:r.tempProduct.description,"onUpdate:modelValue":t[10]||(t[10]=e=>r.tempProduct.description=e),required:""},null,8,["editor","config","modelValue"])]),Object(o["createVNode"])("div",re,[le,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":t[11]||(t[11]=e=>r.tempProduct.content=e)},"\n                ",512),[[o["vModelText"],r.tempProduct.content]])]),Object(o["createVNode"])("div",de,[Object(o["createVNode"])("div",ie,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[12]||(t[12]=e=>r.tempProduct.is_enabled=e)},null,512),[[o["vModelCheckbox"],r.tempProduct.is_enabled]]),se])])])]),Object(o["createVNode"])("div",ne,[be,Object(o["createVNode"])("button",{type:"submit",class:"btn btn-secondary text-white",onClick:t[13]||(t[13]=(...e)=>l.updateProduct&&l.updateProduct(...e))}," 確認 ")])])])])],512)}var ue=c("7c2b"),me=c.n(ue),ge=c("fb3d"),Oe=c.n(ge),je={props:["product"],data(){return{tempProduct:{},image:"",prodcutModal:"",editor:Oe.a,editorConfig:{toolbar:["heading","typing","bold","italic","|","link","bulletedList","Underline","Strike"]}}},watch:{product(){this.tempProduct=JSON.parse(JSON.stringify(this.product)),this.image=this.product.imageUrl}},computed:{...Object(x["b"])({spinner:"all/spinner"})},mounted(){this.productModal=new me.a(this.$refs.productModal,{keyboard:!1,backdrop:"static"}),this.$refs.productModal.addEventListener("hidden.bs.modal",()=>{this.init()})},methods:{init(){this.tempProduct={},this.image="",this.due_date=0;const e=document.querySelector(".needs-validation");e.classList.remove("was-validated")},modal(e){switch(e){case"show":this.productModal.show();break;case"hide":this.productModal.hide();break;default:}},updateProduct(){console.log("判斷"),this.$emit("changeProducts",this.tempProduct),this.modal("hide")},async uploadImage(e){console.log(e),this.$refs.uploadImage.click(),this.tempProduct.imageUrl=[],this.image="";const t=this;if(console.log(e.target.files),void 0===e.target.files)return;const c=e.target.files[0],o=new FileReader;console.log(c),o.onload=function(e){t.image=e.target.result},o.readAsDataURL(c);const a=new FormData;a.append("file-to-upload",c),this.$store.commit("all/SAVE_SPINNER",!0),await this.axios.post("https://vue3-course-api.hexschool.io/api/traveltime1221/admin/upload",a).then(e=>{console.log(e),this.$store.commit("all/SAVE_SPINNER",!1),e.data.success?(this.tempProduct.imageUrl=e.data.imageUrl,this.$swal.fire({position:"top-end",icon:"success",title:"上傳成功",showConfirmButton:!1,timer:1500})):this.$swal.fire({icon:"error",title:"Oops...",text:e.data.message})}).catch(e=>{console.log(e.response),this.$store.commit("all/SAVE_SPINNER",!1),this.$swal.fire({icon:"error",title:"Oops...",text:e.data.message})})}}};je.render=pe;var he=je,Ve=c("ac49"),Ne={props:["token"],components:{Pagination:y["a"],DelModal:w["a"],ProductModal:he,InnerBanner:Ve["a"]},computed:{...Object(x["b"])({product:"backend/product",pagination:"backend/pagination",productLists:"backend/productLists"})},watch:{product(){this.tempProduct=JSON.parse(JSON.stringify(this.product))}},data(){return{msg:"產品管理",tempProduct:{},image:""}},async created(){await this.$store.dispatch("backend/fetchgetProductLists",1)},mounted(){},methods:{async getProduct(e){await this.$store.commit("backend/SAVE_PRODUCT",e)},async delProduct(e){await this.$store.dispatch("backend/fetchRemoveProduct",e)},async changeProducts(e){console.log(e),await this.$store.dispatch("backend/fetchChangeProduct",e)},async changePage(e){await this.$store.dispatch("backend/fetchgetProductLists",e)}}};Ne.render=P;t["default"]=Ne}}]);
//# sourceMappingURL=chunk-7e6c62dc.e24cd0a0.js.map