(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8bd29f2e"],{9097:function(e,t,o){"use strict";o.r(t);var a=o("7a23");const c=Object(a["createVNode"])("div",{class:"text-end mt-4"},[Object(a["createVNode"])("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#couponModal"}," 建立新的優惠券 ")],-1),l={class:"table mt-4"},d=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"名稱"),Object(a["createVNode"])("th",null,"折扣百分比"),Object(a["createVNode"])("th",null,"到期日"),Object(a["createVNode"])("th",null,"是否啟用"),Object(a["createVNode"])("th",null,"編輯")])],-1),n={key:0,class:"text-success"},r={key:1,class:"text-muted"},s={class:"btn-group"},b={class:"pagination justify-content-center"};function i(e,t,o,i,p,u){const m=Object(a["resolveComponent"])("loading"),O=Object(a["resolveComponent"])("Pagination"),j=Object(a["resolveComponent"])("CouponModal"),V=Object(a["resolveComponent"])("DelModal");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(m,{active:e.loading,"z-index":1060},null,8,["active"]),c,Object(a["createVNode"])("table",l,[d,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.couponLists,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.title),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.percent)+"%",1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.due_date),1),Object(a["createVNode"])("td",null,[1===e.is_enabled?(Object(a["openBlock"])(),Object(a["createBlock"])("span",n,"啟用")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",r,"未啟用"))]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",s,[Object(a["createVNode"])("button",{class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#couponModal",onClick:t=>u.tempCouponObj(e)},"編輯",8,["onClick"]),Object(a["createVNode"])("button",{class:"btn btn-outline-danger btn-sm","data-bs-toggle":"modal","data-bs-target":"#delModal",onClick:t=>u.tempCouponObj(e)},"刪除",8,["onClick"])])])]))),128))])]),Object(a["createVNode"])("ul",b,[e.couponLists.length>1?(Object(a["openBlock"])(),Object(a["createBlock"])(O,{key:0,"current-page":e.pagination.current_page,"total-page":e.pagination.total_pages,onChangePage:e.changePage},null,8,["current-page","total-page","onChangePage"])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])(j,{coupon:p.tempCoupon,onUpdateCoupon:u.updateCoupon},null,8,["coupon","onUpdateCoupon"]),Object(a["createVNode"])(V,{item:p.tempCoupon,ref:"delModal",onDelItem:u.delCoupon},null,8,["item","onDelItem"])])}var p=o("5502");const u={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"couponModal","data-bs-target":"#couponModal"},m={class:"modal-dialog",role:"document"},O={class:"modal-content"},j={class:"modal-header"},V={class:"modal-title",id:"exampleModalLabel"},N={key:0},g={key:1},h=Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),C={class:"modal-body"},v={class:"mb-3"},k=Object(a["createVNode"])("label",{for:"title"},"標題",-1),f={class:"mb-3"},y=Object(a["createVNode"])("label",{for:"coupon_code"},"優惠碼",-1),M={class:"mb-3"},x=Object(a["createVNode"])("label",{for:"due_date"},"到期日",-1),B={class:"mb-3"},_=Object(a["createVNode"])("label",{for:"price"},"折扣百分比",-1),w={class:"mb-3"},D={class:"form-check"},L=Object(a["createVNode"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),S={class:"modal-footer"},U=Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function $(e,t,o,c,l,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",u,[Object(a["createVNode"])("div",m,[Object(a["createVNode"])("div",O,[Object(a["createVNode"])("div",j,[Object(a["createVNode"])("h5",V,[l.tempCoupon.id?(Object(a["openBlock"])(),Object(a["createBlock"])("span",N,"新增優惠卷")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",g,"編輯優惠卷"))]),h]),Object(a["createVNode"])("div",C,[Object(a["createVNode"])("div",v,[k,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>l.tempCoupon.title=e),placeholder:"請輸入標題"},null,512),[[a["vModelText"],l.tempCoupon.title]])]),Object(a["createVNode"])("div",f,[y,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control",id:"coupon_code","onUpdate:modelValue":t[2]||(t[2]=e=>l.tempCoupon.code=e),placeholder:"請輸入優惠碼"},null,512),[[a["vModelText"],l.tempCoupon.code]])]),Object(a["createVNode"])("div",M,[x,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"date",class:"form-control",id:"due_date","onUpdate:modelValue":t[3]||(t[3]=e=>l.due_date=e)},null,512),[[a["vModelText"],l.due_date]])]),Object(a["createVNode"])("div",B,[_,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"number",class:"form-control",id:"price",min:"0","onUpdate:modelValue":t[4]||(t[4]=e=>l.tempCoupon.percent=e),placeholder:"請輸入折扣百分比"},null,512),[[a["vModelText"],l.tempCoupon.percent,void 0,{number:!0}]])]),Object(a["createVNode"])("div",w,[Object(a["createVNode"])("div",D,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[5]||(t[5]=e=>l.tempCoupon.is_enabled=e),id:"is_enabled"},null,512),[[a["vModelCheckbox"],l.tempCoupon.is_enabled]]),L])])]),Object(a["createVNode"])("div",S,[U,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[6]||(t[6]=t=>(e.$emit("update-coupon",l.tempCoupon),d.init()))},"更新優惠券 ")])])])],512)}var J={props:{coupon:{type:Object,default(){return{}}}},data(){return{tempCoupon:{},due_date:""}},mounted(){this.$refs.couponModal.addEventListener("hidden.bs.modal",()=>{this.tempCoupon={},this.due_date=0})},methods:{init(){this.tempCoupon={}}},watch:{coupon(){this.tempCoupon=JSON.parse(JSON.stringify(this.coupon))},due_date(){this.tempCoupon.due_date=Math.floor(new Date(this.due_date)/1e3)}}};J.render=$;var T=J,P=o("e417"),I={components:{CouponModal:T,DelModal:P["a"]},data(){return{tempCoupon:{title:"",is_enabled:0,percent:100,code:""}}},computed:{...Object(p["b"])({loading:"all/loading",couponLists:"backend/couponLists",pagination:"backend/pagination"})},async created(){await this.$store.dispatch("backend/fetchGetCoupons")},methods:{async tempCouponObj(e){this.tempCoupon=JSON.parse(JSON.stringify(e))},async updateCoupon(e){await this.$store.dispatch("backend/fetchChangeCoupons",e)},async delCoupon(e){await this.$store.dispatch("backend/fetchRemoveSingleCoupon",e.id)}}};I.render=i;t["default"]=I},e417:function(e,t,o){"use strict";var a=o("7a23");const c={id:"delModal",ref:"delModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true"},l={class:"modal-dialog modal-dialog-centered"},d={class:"modal-content border-0"},n=Object(a["createVNode"])("div",{class:"modal-header text-black text-center"},[Object(a["createVNode"])("h5",{id:"delModalLabel",class:"modal-title font-weight-bold"},[Object(a["createVNode"])("span",null,"刪除提示")])],-1),r={class:"modal-body text-center"},s=Object(a["createVNode"])("i",{class:"fas fa-exclamation-triangle text-danger"},null,-1),b=Object(a["createVNode"])("br",null,null,-1),i=Object(a["createVNode"])("br",null,null,-1),p=Object(a["createTextVNode"])(" 是否刪除 "),u={class:"text-danger"},m=Object(a["createTextVNode"])(" (刪除後將無法恢復)。 "),O={class:"modal-footer"};function j(e,t,o,j,V,N){return Object(a["openBlock"])(),Object(a["createBlock"])("div",c,[Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",d,[n,Object(a["createVNode"])("div",r,[s,b,i,p,Object(a["createVNode"])("strong",u,Object(a["toDisplayString"])(o.item.title),1),m]),Object(a["createVNode"])("div",O,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=t=>e.$emit("cancel"))}," 取消 "),Object(a["createVNode"])("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal","data-bs-toggle":"modal","data-bs-target":"#delModal",onClick:t[2]||(t[2]=t=>e.$emit("delItem",o.item.id))}," 確認刪除 ")])])])],512)}var V={props:["item"]};V.render=j;t["a"]=V}}]);
//# sourceMappingURL=chunk-8bd29f2e.777ae42e.js.map